<div class="container mt-5">
  <!-- Perfil del usuario -->
  <div
    class="card shadow-lg mb-5 border-0 rounded-4"
    *ngIf="trabajador; else cargando"
  >
    <div
      class="card-header bg-gradient-primary text-white rounded-top-4 d-flex align-items-center"
    >
      <i class="fas fa-user-circle fa-2x me-3"></i>
      <h4 class="mb-0 fw-light">Mi Cuenta</h4>
    </div>
    <div class="card-body p-5">
      <div class="row g-4">
        <div class="col-md-6">
          <div
            class="info-item d-flex align-items-center p-3 rounded-3 bg-light"
          >
            <i class="fas fa-user fa-lg me-3 text-primary"></i>
            <div>
              <small class="text-muted">Nombre</small>
              <p class="mb-0 fw-semibold">{{ trabajador.nombreCompleto }}</p>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div
            class="info-item d-flex align-items-center p-3 rounded-3 bg-light"
          >
            <i class="fas fa-envelope fa-lg me-3 text-primary"></i>
            <div>
              <small class="text-muted">Correo</small>
              <p class="mb-0 fw-semibold">{{ trabajador.email }}</p>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div
            class="info-item d-flex align-items-center p-3 rounded-3 bg-light"
          >
            <i class="fas fa-user-tag fa-lg me-3 text-primary"></i>
            <div>
              <small class="text-muted">Usuario</small>
              <p class="mb-0 fw-semibold">{{ trabajador.username }}</p>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div
            class="info-item d-flex align-items-center p-3 rounded-3 bg-light"
          >
            <i class="fas fa-calendar-alt fa-lg me-3 text-primary"></i>
            <div>
              <small class="text-muted">Registrado el</small>
              <p class="mb-0 fw-semibold">
                {{ trabajador.fechaRegistro | date : "mediumDate" }}
              </p>
            </div>
          </div>
        </div>
        <div class="col-12">
          <div
            class="info-item d-flex align-items-center p-3 rounded-3 bg-light"
          >
            <i class="fas fa-file-alt fa-lg me-3 text-primary"></i>
            <div>
              <small class="text-muted">Formularios creados</small>
              <p class="mb-0 fw-semibold">{{ trabajador.numeroFormularios }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Estado de carga -->
  <ng-template #cargando>
    <div class="text-center py-5">
      <div
        class="spinner-grow text-primary"
        style="width: 3rem; height: 3rem"
        role="status"
      >
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p class="mt-3 text-muted">Cargando información del usuario...</p>
    </div>
  </ng-template>

  <!-- Formulario de cambio de contraseña -->
  <div class="card shadow-lg border-0 rounded-4">
    <div
      class="card-header bg-gradient-primary text-white rounded-top-4 d-flex align-items-center"
    >
      <i class="fas fa-lock fa-2x me-3"></i>
      <h4 class="mb-0 fw-light">Cambiar Contraseña</h4>
    </div>
    <div class="card-body p-5">
      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="mb-4 position-relative">
          <label for="newPassword" class="form-label fw-semibold">
            Nueva Contraseña
          </label>
          <div class="input-group">
            <span class="input-group-text bg-light border-end-0">
              <i class="fas fa-lock text-primary"></i>
            </span>
            <input
              type="password"
              id="newPassword"
              formControlName="newPassword"
              class="form-control border-start-0"
              placeholder="Ingrese la nueva contraseña"
              [ngClass]="{
                'is-invalid':
                  form.get('newPassword')?.invalid &&
                  form.get('newPassword')?.touched
              }"
            />
          </div>
          <div
            class="text-danger small mt-2"
            *ngIf="
              form.get('newPassword')?.invalid &&
              form.get('newPassword')?.touched
            "
          >
            La contraseña debe tener al menos 6 caracteres.
          </div>
        </div>

        <button
          type="submit"
          class="btn btn-primary w-100 py-2 fw-semibold"
          [disabled]="form.invalid"
        >
          <i class="fas fa-save me-2"></i> Cambiar Contraseña
        </button>
      </form>
    </div>
  </div>
</div>
